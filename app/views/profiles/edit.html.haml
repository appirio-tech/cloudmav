= content_for :title do
  Edit your profile
  
/ = content_for :head do
/   = javascript_include_tag "http://maps.google.com/maps/api/js?sensor=false"
/   = javascript_include_tag "jquery.auto-geocoder"

.grid_16
  %h1 Edit Profile

  = semantic_form_for @profile, :url => update_profile_path(@profile) do |f|
    = f.inputs do
      = f.input :name
      = f.input :email
    .fieldset.set_location
      %legend Location
      = f.text_area :location, :size=>'20x3', :id=>:location, :class=>:location
      = f.hidden_field :lat, :id => :lat
      = f.hidden_field :lng, :id => :lng
    = f.buttons do
      = big_primary_button_submit_tag "Save"
      
.clear

:javascript
  $(document).ready(function() {    
    $('#location')
    .bind('auto-geocoder.onGeocodeSuccess', function(e, results, status) {
      $("#lng").val(results[0].geometry.location.lng());
      $("#lat").val(results[0].geometry.location.lat());
    })
    .autoGeocoder();
  });
